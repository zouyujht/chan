BSP计算主要分为三种类型的买卖点：
 Type 1 买卖点（一类买卖点）
计算逻辑 ：

- 位置 ：线段的结束笔
- 条件 ：必须满足背驰条件
- 实现 ： `treat_bsp1` 和 `treat_pz_bsp1`
关键要素 ：

- 背驰检测 ：通过MACD等指标计算背驰率
- 峰值突破 ：检查是否突破中枢的峰值
- 中枢条件 ：必须有多笔中枢 Type 2 买卖点（二类买卖点）
计算逻辑 ：

- 位置 ：一类买卖点后的第二个笔
- 条件 ：回撤幅度不超过设定比例
- 实现 ： `treat_bsp2`
关键要素 ：

- 回撤比例 ： max_bs2_rate 参数控制最大回撤比例
- 依赖关系 ：必须跟随一类买卖点出现
- 时序关系 ：严格按照笔的顺序计算 Type 3 买卖点（三类买卖点）
计算逻辑 ：

- 位置 ：中枢震荡过程中的买卖点
- 条件 ：不回到中枢内部，可能突破中枢峰值
- 实现 ： `treat_bsp3_after` 和 `treat_bsp3_before`
BSP计算由 `BSPointConfig.py` 中的配置类控制：

关键参数 ：

- divergence_rate ：背驰率阈值
- max_bs2_rate ：二类买卖点最大回撤比例
- min_zs_cnt ：最小中枢数量
- macd_algo ：MACD算法选择
- bsp1_only_multibi_zs ：一类买卖点是否只在多笔中枢
- bsp3_peak ：三类买卖点是否需要突破峰值